<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Breakout</title>
    <script src="//cdn.jsdelivr.net/phaser/2.6.2/phaser.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>

    <script type="text/javascript">

        var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

        // Schläger
        var racket;
        // Ball
        var ball;
        // Geschwindigkeit des Balls
        var ballSpeed = 200;
        // Geschwindigkeit des Schlägers
        var racketSpeed = 200;

        /*
         * Wird von Phaser beim Laden des Spiels aufgerufen.
         */
        function preload() {
            game.load.image('background', 'assets/background.png');
            game.load.image('racket', 'assets/racket.png');
            game.load.image('ball', 'assets/ball.png');
            game.load.image('brick', 'assets/brick.png');
            game.load.image('powerup-speed', 'assets/powerup-speed.png');
            game.load.image('powerup-size', 'assets/powerup-size.png');
        }

        /*
         * Wird von Phaser beim Spielstart aufgerufen.
         */
        function create() {
            // Physik starten
            game.physics.startSystem(Phaser.Physics.ARCADE);

            // Schläger erstellen
            racket = game.add.sprite(game.world.centerX - 30, game.world.height - 20, 'racket');
            game.physics.arcade.enable(racket);
            // Gravitation & Impuls wirkt nicht auf den Schläger
            racket.body.immovable = true;
            // Schläger kann nicht aus der Welt bewegt werden
            racket.body.collideWorldBounds = true;

            // Ball erstellen
            ball = game.add.sprite(0, 0, 'ball');
            game.physics.arcade.enable(ball);
            // Ball hat 100% Elastizität und springt perfekt
            ball.body.bounce.y = 1;
            ball.body.bounce.x = 1;
            // Ball über dem Schläger platzieren
            resetBall();

            // Der Ball kann nicht aus der Welt bewegt werden (außer nach unten)
            ball.body.collideWorldBounds = true;

            ball.body.velocity.x = ballSpeed;
            ball.body.velocity.y = ballSpeed;
        }

        /*
         * Setzt den Ball über den Schläger und hält den Ball solange an, bis der Schläger bewegt wird.
         */
        function resetBall() {
            holdBall = true;
            ball.reset(racket.body.x + 30, racket.y - 20);
            ball.body.velocity.setTo(0, 0);
        }

        /*
         * Wird von Phaser kontinuierlich aufgerufen.
         */
        function update() {
            // Vom der Tastatur lesen
            var cursors = game.input.keyboard.createCursorKeys();

            if (cursors.left.isDown) {
                // Links wurde gedrückt, also den Schläger nach links bewegen
                racket.body.velocity.x = -racketSpeed;
            } else if (cursors.right.isDown) {
                // Rechts wurde gedrückt, also den Schläger nach links bewegen
                racket.body.velocity.x = racketSpeed;
            } else {
                // Es wurde keine Taste gedrückt, also Schläger anhalten
                racket.body.velocity.x = 0;
            }
        }
    </script>

</body>

</html>